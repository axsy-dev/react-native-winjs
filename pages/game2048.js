webpackJsonp([0],{0:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){if("web"==p.OS){var e=t.nativeEvent.changedTouches[0];return{pageX:e.pageX,pageY:e.pageY}}return{pageX:t.nativeEvent.pageX,pageY:t.nativeEvent.pageY}}var s=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),a=function(t,e,o){for(var n=!0;n;){var r=t,i=e,s=o;n=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,i);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=i,o=s,n=!0,a=u=void 0}},l=o(1),u=l.AppRegistry,c=l.StyleSheet,h=l.Text,f=l.View,p=l.Platform,d=o(173),m=o(336),v=o(337),g=3,y=4,b=60,w=function(t){function e(){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){return l.createElement(f,{style:R.cell})}}]),e}(l.Component),E=function(t){function e(){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){return l.createElement(f,{style:R.board},l.createElement(f,{style:R.row},l.createElement(w,null),l.createElement(w,null),l.createElement(w,null),l.createElement(w,null)),l.createElement(f,{style:R.row},l.createElement(w,null),l.createElement(w,null),l.createElement(w,null),l.createElement(w,null)),l.createElement(f,{style:R.row},l.createElement(w,null),l.createElement(w,null),l.createElement(w,null),l.createElement(w,null)),l.createElement(f,{style:R.row},l.createElement(w,null),l.createElement(w,null),l.createElement(w,null),l.createElement(w,null)),this.props.children)}}]),e}(l.Component),P=function(t){function e(t){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var o=this.props.tile;this.state={opacity:new d.Value(0),top:new d.Value(e._getPosition(o.toRow())),left:new d.Value(e._getPosition(o.toColumn()))}}return r(e,t),s(e,null,[{key:"_getPosition",value:function(t){return g+(t*(b+2*y)+y)}}]),s(e,[{key:"calculateOffset",value:function(){var t=this.props.tile,o={top:this.state.top,left:this.state.left,opacity:this.state.opacity};return t.isNew()?d.timing(this.state.opacity,{duration:100,toValue:1}).start():d.parallel([d.timing(o.top,{duration:100,toValue:e._getPosition(t.toRow())}),d.timing(o.left,{duration:100,toValue:e._getPosition(t.toColumn())})]).start(),o}},{key:"render",value:function(){var t=this.props.tile,e=[R.tile,R["tile"+t.value],this.calculateOffset()],o=[R.value,t.value>4&&R.whiteText,t.value>100&&R.threeDigits,t.value>1e3&&R.fourDigits];return l.createElement(d.View,{style:e},l.createElement(h,{style:o},t.value))}}]),e}(l.Component),T=function(t){function e(){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){var t=this.props.board;if(!t.hasWon()&&!t.hasLost())return l.createElement(f,null);var e=t.hasWon()?"Good Job!":"Game Over";return l.createElement(f,{style:R.overlay},l.createElement(h,{style:R.overlayMessage},e),l.createElement(v,{onPress:this.props.onRestart,style:R.tryAgain},l.createElement(h,{style:R.tryAgainText},"Try Again?")))}}]),e}(l.Component),C=function(t){function e(t){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={board:new m},this.startX=0,this.startY=0}return r(e,t),s(e,[{key:"restartGame",value:function(){this.setState({board:new m})}},{key:"handleTouchStart",value:function(t){if(!this.state.board.hasWon()){var e=i(t);this.startX=e.pageX,this.startY=e.pageY}}},{key:"handleTouchEnd",value:function(t){if(!this.state.board.hasWon()){var e=i(t),o=e.pageX-this.startX,n=e.pageY-this.startY,r=-1;Math.abs(o)>3*Math.abs(n)&&Math.abs(o)>30?r=o>0?2:0:Math.abs(n)>3*Math.abs(o)&&Math.abs(n)>30&&(r=n>0?3:1),-1!==r&&this.setState({board:this.state.board.move(r)})}}},{key:"render",value:function(){var t=this,e=this.state.board.tiles.filter(function(t){return t.value}).map(function(t){return l.createElement(P,{ref:t.id,key:t.id,tile:t})});return l.createElement(f,{style:R.container,onTouchStart:function(e){return t.handleTouchStart(e)},onTouchEnd:function(e){return t.handleTouchEnd(e)}},l.createElement(E,null,e),l.createElement(T,{board:this.state.board,onRestart:function(){return t.restartGame()}}))}}]),e}(l.Component),R=c.create({container:{flex:1,justifyContent:"center",alignItems:"center"},board:{padding:g,backgroundColor:"#bbaaaa",borderRadius:5},overlay:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(221, 221, 221, 0.5)",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"},overlayMessage:{fontSize:40,marginBottom:20},tryAgain:{backgroundColor:"#887766",padding:20,borderRadius:5},tryAgainText:{color:"#ffffff",fontSize:20,fontWeight:"500"},cell:{width:b,height:b,borderRadius:5,backgroundColor:"#ddccbb",margin:y},row:{flexDirection:"row"},tile:{position:"absolute",width:b,height:b,backgroundColor:"#ddccbb",borderRadius:5,flex:1,justifyContent:"center",alignItems:"center"},value:{fontSize:24,color:"#776666",fontFamily:"Verdana",fontWeight:"500"},tile2:{backgroundColor:"#eeeeee"},tile4:{backgroundColor:"#eeeecc"},tile8:{backgroundColor:"#ffbb88"},tile16:{backgroundColor:"#ff9966"},tile32:{backgroundColor:"#ff7755"},tile64:{backgroundColor:"#ff5533"},tile128:{backgroundColor:"#eecc77"},tile256:{backgroundColor:"#eecc66"},tile512:{backgroundColor:"#eecc55"},tile1024:{backgroundColor:"#eecc33"},tile2048:{backgroundColor:"#eecc22"},whiteText:{color:"#ffffff"},threeDigits:{fontSize:20},fourDigits:{fontSize:18}});if(u.registerComponent("Game2048",function(){return C}),"web"==p.OS){var O=document.createElement("div");document.body.appendChild(O),u.runApplication("Game2048",{rootTag:O})}t.exports=C},336:function(t,e){"use strict";var o=function(t){for(var e=t.length,o=t[0].length,n=[],r=0;e>r;++r){n.push([]);for(var i=0;o>i;++i)n[r][i]=t[i][o-r-1]}return n},n=function i(t,e,o){this.value=t||0,this.row=e||-1,this.column=o||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=i.id++};n.id=0,n.prototype.moveTo=function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e},n.prototype.isNew=function(){return-1===this.oldRow&&!this.mergedInto},n.prototype.hasMoved=function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto},n.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},n.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},n.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},n.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column};var r=function s(){this.tiles=[],this.cells=[];for(var t=0;t<s.size;++t)this.cells[t]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1};r.prototype.addTile=function(){var t=new n;return n.apply(t,arguments),this.tiles.push(t),t},r.size=4,r.prototype.moveLeft=function(){for(var t=!1,e=0;e<r.size;++e){for(var o=this.cells[e].filter(function(t){return 0!==t.value}),n=[],i=0;i<r.size;++i){var s=o.length?o.shift():this.addTile();if(o.length>0&&o[0].value===s.value){var a=s;s=this.addTile(s.value),a.mergedInto=s;var l=o.shift();l.mergedInto=s,s.value+=l.value}n[i]=s,this.won=this.won||2048===s.value,t=t||s.value!==this.cells[e][i].value}this.cells[e]=n}return t},r.prototype.setPositions=function(){this.cells.forEach(function(t,e){t.forEach(function(t,o){t.oldRow=t.row,t.oldColumn=t.column,t.row=e,t.column=o,t.markForDeletion=!1})})},r.fourProbability=.1,r.prototype.addRandomTile=function(){for(var t=[],e=0;e<r.size;++e)for(var o=0;o<r.size;++o)0===this.cells[e][o].value&&t.push({r:e,c:o});var n=Math.floor(Math.random()*t.length),i=t[n],s=Math.random()<r.fourProbability?4:2;this.cells[i.r][i.c]=this.addTile(s)},r.prototype.move=function(t){this.clearOldTiles();for(var e=0;t>e;++e)this.cells=o(this.cells);for(var n=this.moveLeft(),e=t;4>e;++e)this.cells=o(this.cells);return n&&this.addRandomTile(),this.setPositions(),this},r.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter(function(t){return t.markForDeletion===!1}),this.tiles.forEach(function(t){t.markForDeletion=!0})},r.prototype.hasWon=function(){return this.won},r.deltaX=[-1,0,1,0],r.deltaY=[0,-1,0,1],r.prototype.hasLost=function(){for(var t=!1,e=0;e<r.size;++e)for(var o=0;o<r.size;++o){t=t||0===this.cells[e][o].value;for(var n=0;4>n;++n){var i=e+r.deltaX[n],s=o+r.deltaY[n];0>i||i>=r.size||0>s||s>=r.size||(t=t||this.cells[e][o].value===this.cells[i][s].value)}}return!t},t.exports=r},337:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},i=o(173),s=n(i),a=o(2),l=n(a),u=o(237),c={top:20,left:20,right:20,bottom:30},h=l["default"].createClass({displayName:"TouchableBounce",mixins:[u.Mixin],propTypes:{onPress:l["default"].PropTypes.func,onPressIn:l["default"].PropTypes.func,onPressOut:l["default"].PropTypes.func,onPressWithCompletion:l["default"].PropTypes.func,onPressAnimationComplete:l["default"].PropTypes.func},getInitialState:function(){return r({},this.touchableGetInitialState(),{scale:new s["default"].Value(1)})},bounceTo:function(t,e,o,n){s["default"].spring(this.state.scale,{toValue:t,velocity:e,bounciness:o}).start(n)},touchableHandleActivePressIn:function(t){this.bounceTo(.93,.1,0),this.props.onPressIn&&this.props.onPressIn(t)},touchableHandleActivePressOut:function(t){this.bounceTo(1,.4,0),this.props.onPressOut&&this.props.onPressOut(t)},touchableHandlePress:function(t){var e=this,o=this.props.onPressWithCompletion;return o?void o(function(){e.state.scale.setValue(.93),e.bounceTo(1,10,10,e.props.onPressAnimationComplete)}):(this.bounceTo(1,10,10,this.props.onPressAnimationComplete),void(this.props.onPress&&this.props.onPress(t)))},touchableGetPressRectOffset:function(){return c},touchableGetHighlightDelayMS:function(){return 0},render:function(){return l["default"].createElement(s["default"].View,{style:[{transform:[{scale:this.state.scale}]},this.props.style],accessible:!0,testID:this.props.testID,onStartShouldSetResponder:this.touchableHandleStartShouldSetResponder,onResponderTerminationRequest:this.touchableHandleResponderTerminationRequest,onResponderGrant:this.touchableHandleResponderGrant,onResponderMove:this.touchableHandleResponderMove,onResponderRelease:this.touchableHandleResponderRelease,onResponderTerminate:this.touchableHandleResponderTerminate},this.props.children)}});t.exports=h}});
//# sourceMappingURL=game2048.js.map